/**
 * Complexe Condition Component
 *
 * Version 3.1.0
 *
 * Changelog
 * 3.1 - Standalone development
 *     - JS Strict Mode
 *     - Gulp Scripts
 * 3.0 - Compatibility to Reports functions
 * 2.3 - Rework for Standalone task
 * 2.3.1 - 2017-08-17
 *       - Add option to set fieldname prefix
 *       - Make InitAutocompleteText optional
 *
 * Handling
 * Require FlexTranslate in current Scope
 * Require set of ConditionScopeModule to current Module
 * Require jquery.form.min.js inside views/resources of ConditionScopeModule
 * Condition Popup needs "ComplexeCondition" action in ConditionScopeModule/action
 * Condition Popup needs "ComplexeCondition" view in ConditionScopeModule/views
 * Condition Popup needs "ConditionPopup.tpl" Template in ConditionScopeModule
 *
 * Usage
 */
!function(e){"use strict";function i(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function t(e,t,o,n){null==o&&(o=""),0==t&&(t=e.replace(/[^a-zA-Z0-9_]+/g,"_")),void 0===n&&(n={}),void 0===n.module&&"undefined"!=typeof moduleName&&(n.module=moduleName),void 0===n.refFields&&(n.refFields=!1),void 0===n.mode&&(n.mode=""),void 0===n.class&&(n.class=""),void 0===n.style&&(n.style=""),void 0===n.disabled||0==n.disabled?n.disabled="":n.disabled="disabled='disabled'",void 0===n.type&&(n.type="0"),void 0===n.uitype&&(n.uitype=[]),void 0===n.delimiter&&(n.delimiter=""),void 0===n.title&&(n.title=""),void 0===n.datalist&&(n.datalist=""),void 0===n.fieldType&&(n.fieldType="text"),void 0===n.readonly&&(n.readonly=!1),void 0===n.placeholder&&(n.placeholder=""),void 0===n.variables&&(n.variables=!0),void 0===n.width&&(n.width="600px"),void 0===n.module&&(n.module=""),void 0===n.dataAttr&&(n.dataAttr=!1),n.class+=" condition_value text textfield templateField initAutocomplete form-control";var a="";jQuery.each(n.dataAttr,function(e,i){a+=" data-"+e+'="'+i+'"'});var l=n.uitype.join(","),d="<input autocomplete='false' type='"+n.fieldType+"' data-currentvalue='"+i(o)+"' "+a+" "+(""!==n.datalist?'list="'+n.datalist+'"':"")+" title='"+n.title+"' placeholder='"+n.placeholder+"'  alt='"+n.title+"' data-delimiter='"+n.delimiter+"' ondblclick='dblClickTextfield(\""+t+"\");' "+n.disabled+"style='width:100% !important;float:left;"+n.style+"' data-module='"+n.module+"' class='"+n.class+"' name='"+e+"' id='"+t+"' "+(!0===n.readonly?'readonly="readonly"':"")+' value="'+(!1!==o?i(o):"")+'">';return 1==n.variables?"expression"!=n.mode?d+="<span class='templateFieldBtn templateFieldButton' data-references='([source]: ([module]) [destination])' data-functions='true' data-replace='false' data-options='{\"refFields\":\""+n.refFields+'", "module": "'+n.module+'", "uitypes": "'+l+'", "type":"'+n.type+"\"}' ><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBA8CIxxYy4paAAAAnElEQVQoz5WRsQ4BQRRFDzaUVBpbS0Qi0fkBH0Gz/ooOP6RSa9b4ACKxJHs1GztPZiTONPPunLzkvQGfFRfOLImQ8kKIgn4dNo2QANBmEO7Q4YgQh0oEoGGULhkle2511DJCwZ0Tjig7hNjEnieoOsPwFArcvtgixJofjBnZIDFVjzkljusfi/KZfaaYhoWUJ0I8/M+yZDhyFn70BtrhMDokCc6yAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA0LTE1VDAwOjM1OjI4KzAyOjAwZI0qbAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNC0xNVQwMDozNToyOCswMjowMBXQktAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC' id='templateIcon_"+t+"'  style='margin-bottom:-5px;cursor:pointer;'></span>":d+="<span class='templateFieldBtn templateFieldButton' data-references='[source]->[module]->[destination]' data-functions='false' data-replace='false' data-options='{\"module\": \""+n.module+"\"}'  id='task_condition_iconspan'><img src='modules/Workflow2/icons/templatefieldPHP.png' style='margin-bottom:-2px;cursor:pointer;'>":d+="<span class='templateFieldBtn templateFieldResetButton' style='position: absolute;top:0;right: 0px;'><img src='modules/Workflow2/icons/clear.png' alt='"+MOD.LBL_VALUE_CLEAR+"' title='"+MOD.LBL_VALUE_CLEAR+"' style='margin-bottom:-5px;cursor:pointer;'></span>","<span class='templateFieldSpan'>"+d+"</span>"}Array.prototype.last=function(){return this[this.length-1]},void 0===jQuery.assocArraySize&&(jQuery.assocArraySize=function(e){var i,t=0;for(i in e)e.hasOwnProperty(i)&&t++;return t});var o,n={},a=null;function l(i,t,l,s,c){if(!jQuery(i).attr("readonly")){var p=o;if(void 0!==c&&void 0!==c.module&&"undefined"!=c.module&&(p=c.module),void 0===p&&(p=moduleName),void 0!==p){void 0===c&&(c={}),a="function"==typeof c.callback?c.callback:null,null==t&&(t="[source]->[module]->[destination]"),null==l&&(l=!1),null==s&&(s=!1),l=0==l?0:1,void 0===c.type&&(c.type="0"),void 0===c.refFields&&(c.refFields="false"),void 0===c.uitypes&&(c.uitypes="");var u=c.uitypes.split(","),A=t+";;"+p+";;"+c.type+";;"+c.uitypes+";;"+c.refFields+";;functions"+l;0==jQuery("#insertTemplateFieldContainer").length&&jQuery("body").append("<div id='insertTemplateFieldContainer' style='display:none;'></div>"),void 0===n[A]&&(jQuery.ajaxSetup({async:!1}),jQuery("#insertTemplateFieldContainer").load("index.php?module="+r+"&action=TemplateVariables&mode=templateFields",{functions:l,uitypes:u,type:c.type,refFields:c.refFields,reftemplate:t,mainModule:p}),jQuery.ajaxSetup({async:!0}),n[A]=jQuery("#insertTemplateFieldContainer").html()),jQuery("#insertTemplateFieldContainer").html(n[A]),function(i,t,o,n,a){var l=jQuery.Deferred();if(0==(c=jQuery("#pageOverlay")).length){var r=e("<div id='pageOverlay' style='cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOl5NtAAAAHXRSTlP+APnw7+XGwJNGQCZ4tZ6dnFgaGAjR0M97WlfSdwzyPaoAAACHSURBVBjTZU9bEoQgDAsF5KWIILqv+59zi7ozy5ivTNqmCQTD2ypltb5xFnLUBAbpmJuQJ4kLaiosRAk6NwgqCXgNmscBGMaZoD0sgR7hZcwzjEwt3uDhEpwLy8B0w+Fo3Lo6c/jehdqf7P+mn2Z6fyui6oNxdNVHFyX9yqUixFV/k3I/638BJxkF+5eYS7cAAAAASUVORK5CYII=), auto;position:fixed;z-index:1500;top:0;left:0;display:none;height:100%;width:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAElBMVEXCw8TT09PPz8/FxcbLy8zIyMmv866aAAAABnRSTlOwsLCwsLCTI7FOAAAETUlEQVRo3u1ZQZLiMAxUVcgDQvGBeLL3qQ08IENxT0H+/5YdTKCtakv23s0plOy4LSnqli2zPH/3cfj9XePzJT6fvp/P3c/z+fiIhnM0fEVDH5JB9+E1+0/8e1me/6YHTMdrMn8fFF8cXoO2OOj2jdUnOT0ATM9nYFs03BJgUzpIjvuaMNnAuhTYe3UAk2Fa498dczJ/ygHDoP7llhWD5NdnL8yJx+WezD+kwF6D9njtHv/MFjiTME96YwCGUCi3SNaZolMBwPpo4HhF9ELO5FDQi3W85vdsQZaYOcbApmyOCTvTz7G/0aDjtQ8Sy5kqeYMelI9XkNSZyvRjADunyZ+uvilndjDhxYgxJ7+c00H7ZiaV19aOH/tmMEiF4o35+l4TyZ/O73UoEK8zilU0jYQ5CwyDArllFoFpuEmCeeVQ7B7D6qeVPvdPlBhzTzumAqvcAsw3CmXnA5s4lHg1Rxk5hjqk0evV8cEWgNGgYAOb2JmXhSp3Op/ita/JzgRbZJL/nosXk4JK/tGiFK4JD7HYirnWL7Dg2lmx1ZAkv0FJHYCBa00aBVthY37lF12ikONgK5dSvpKwCNiKKr/vca788olySDCn8w9+5b+h8gswU5R9dcGJJLuJyk21ukDyiy/V+KvmHX/UoChnslSrVxfLIMmad1OqjUbyB5VjEmCa4Qyqg1lK6rQCjWC8SuIXWBUvVUmE2YoLrFr9kBKiZiuunVN2xxh0RyieJqZRa8eYn1UX2pm2unA9BmDMVmF3ZgCwvLoAiYsI57VZ+UldUPLDmR6NltUFPOazFQHjeIHS2BRWJvFgciU8Bsxk8pP/SKsbzrST346XhRmfO9qBQakLzrGqPuVW1VcK83P3xkwNs24mqFiJ06ewuvArv7jtAFKhpvJLjka7hdWF31eeNdcyZlYXvuwRr/s3zi6svlLIZDUza7GvFMOZdi9st2+Sd2Z3Hkiqza7smZdBVMtp5JhKfouEt1HojIekGgosh0Lt2GugAMwrsFidaJSS36CkB2v+LL8zjZaBFTAjx+rUBdIHmFlao8DS5+4AU2wTato3+LvMVifymKEuYGIaBVf66gLo66VaXSj7saoXZmlNs20axY7LyR/IY6ZUAzDaMeKVqyQsrbH+4PSVcc1in6J6YauvlEIv3AWq/CY9SIGtuq26fTsK5tefgjpcy8CW9MUDgPUjA8MgcZp0v/JzvEQ36ba6uJb7SgFbaWdYfaVzOCyVUo0LrM+1nPxK9swl2SMGjfaKRoPOMQBL3LIFoT6lpC42ltb7oLpT0EtGWnOxqj0FHehwmIuVyVbl9o2+Kr1m/Skon1obfcpkqguu/Fj9/45nfXXBznR74YGS3wRW7oUn93CYMfskzurCAza46mJlYAsGVWpITn4GxlLNbTlP9ql1u2Ntd6ztjrXdsbY71nbH2u5Y2x1ru2Ntd6ztjrXdsbY71nbH2u5YX8n/D4wVYjMqONy+AAAAAElFTkSuQmCC);'><div id='pageOverlayContent' style='position:fixed;cursor:default;top:100px;margin:auto;left:50%;padding:10px;background-color:#ffffff;'>&nbsp;</div></div>");r.on("click",function(){d()}),jQuery("body").append(r)}if(void 0===s)var s=!1;i+="<br>",i+='<div class="btn-group pull-right" style="text-align:center;margin-top:5px;padding:0 10px 10px;">',i+='<button class="btn btn-warning BtnCancel" onclick="">'+t.cancel+"</button>",i+='<button class="btn btn-success BtnOk">'+t.ok+"</button>",i+="</div>";var c=jQuery("#pageOverlay"),p=jQuery("#pageOverlayContent");i='<img class="closePageOverlay" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOl5NtAAAAHXRSTlP+APnw7+XGwJNGQCZ4tZ6dnFgaGAjR0M97WlfSdwzyPaoAAACHSURBVBjTZU9bEoQgDAsF5KWIILqv+59zi7ozy5ivTNqmCQTD2ypltb5xFnLUBAbpmJuQJ4kLaiosRAk6NwgqCXgNmscBGMaZoD0sgR7hZcwzjEwt3uDhEpwLy8B0w+Fo3Lo6c/jehdqf7P+mn2Z6fyui6oNxdNVHFyX9yqUixFV/k3I/638BJxkF+5eYS7cAAAAASUVORK5CYII=" style="position:absolute;right:-5px;top:-5px;cursor:pointer;">'+i,"none"==c.css("display")?(p.css("width",o+"px"),p.css("marginLeft",o/2*-1+"px"),p.css("visibility","hidden"),c.css("opacity","0"),p.show(),c.show(),p.html(i),0!=s&&jQuery(s).length>0?(c.animate({opacity:1}),jQuery(s).effect("transfer",{to:p},250,function(){p.css("visibility","visible")})):(p.css("visibility","visible"),c.css("opacity","1"),c.show())):(p.html(i),p.animate({width:o+"px",marginLeft:o/2*-1+"px"},"fast",function(){}));return p.find(".closePageOverlay").on("click",function(){d()}),jQuery(".BtnCancel").on("click",function(e){d(),l.resolve(!1)}),jQuery(".BtnOk").on("click",function(e){jQuery(".ModalResultValue","#pageOverlayContent").hasClass("chzn-select")?l.resolve("$"+jQuery(".ModalResultValue","#pageOverlayContent").select2("val")):l.resolve("$"+jQuery(".ModalResultValue","#pageOverlayContent").val()),d()}),jQuery("#pageOverlayContent").on("click.select2",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("#pageOverlayContent").on("click",function(e){e.preventDefault(),e.stopPropagation()}),l.promise()}(jQuery("#insertTemplateFieldContainer").html(),{ok:"OK",cancel:"abbrechen"},500,i.parent().find(".templateFieldButton")).then(function(e){if(!1!==e){var t=i.data("delimiter");if("function"==typeof a)if(!1===a(e,{field:i.attr("id"),replace:s}))return;if(1==s)i.val(e);else{var o=i.val();void 0!==t&&o.length>0&&(o+=t),i.val(o+e)}i.trigger("insertText",[e]),i.trigger("change"),i.trigger("blur")}}),jQuery("#pageOverlayContent select.chzn-select").select2(),jQuery("#pageOverlayContent").on("click",function(e){e.stopPropagation()})}}}function d(e,i){if(void 0===i)i=!1;if(void 0!==e&&0!=jQuery("#"+e).length){var t=jQuery("#pageOverlay");jQuery("#pageOverlayContent");1!=i?t.animate({opacity:0}):t.hide()}else jQuery("#pageOverlay").hide("fast")}var r="",s=function(o,n){this.complexeConditionObj=o,void 0===n&&(n=!1),this.parentGroup=n,this.elementIndex=this.parentGroup.getFreeElementIndex(),this.fieldNamePrefix=this.parentGroup.getGroupPrefix()+"["+this.elementIndex+"]",this.fieldIdPrefix=this.parentGroup.getGroupIdPrefix()+"_"+this.elementIndex,this.container=null;var a=this;this.appendTo=function(i){var t="";t+="<div class='ConditionalRecord "+(!0===this.complexeConditionObj.isInitialized()?"NewConditionalRecord":"")+"'>",t+="<img class='ConditionRemove' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBA4NCASON889AAAAUElEQVQoz2NgSGZ4z/AfB3zPkMTI8J6BleEGA3agwfCbgeE/wzEGXOA4w38mBgKAjgpSGZ6gwVSIBAtc6X9cZgwBbxKKrF8MDEl4ovsdQyIAAmIzIBOr6dYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMTRUMTE6MDg6MDQrMDI6MDBj5QO2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTE0VDExOjA4OjA0KzAyOjAwEri7CgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=' alt='delete'>";var o="f_"+this.fieldIdPrefix;!1===this.complexeConditionObj.IsDynamicFieldLoader()?t+="<select class='ConditionField MakeSelect2' name='"+this.fieldNamePrefix+"[field]' id='"+o+"_field'>"+this.complexeConditionObj.getFieldOptions()+"</select>":t+="<input type='hidden' class='ConditionField MakeHiddenSelect2' name='"+this.fieldNamePrefix+"[field]'  id='"+o+"_field' />",!0===this.complexeConditionObj.IsValueModifiersVisible()&&(t+="<select class='ConditionMod' name='"+this.fieldNamePrefix+"[mod]' id='"+o+"_modification'></select><br/>"),t+="<select class='ConditionNot' name='"+this.fieldNamePrefix+"[not]' id='"+o+"_not'><option value='0'>-</option><option value='1'>"+this.complexeConditionObj.__("LBL_NOT")+"</option></select>",t+="<select class='ConditionOperation' name='"+this.fieldNamePrefix+"[operation]' id='"+o+"_operation'><option value=''>_</option></select>",t+='<select class="ConditionMode" '+(!1===this.complexeConditionObj.IsConditionModeVisible()?'style="display:none;"':"")+' name="'+this.fieldNamePrefix+'[mode]" id="'+o+'_mode"><option value="value">'+this.complexeConditionObj.__("LBL_STATIC_VALUE")+'</option><option value="function">'+this.complexeConditionObj.__("LBL_FUNCTION_VALUE")+"</option></select>",t+="<div class='ConditionContainer'></div>",t+="</div>",t+=this.complexeConditionObj.generateJOINSelect("",!1),this.container=e(t),e(i).append(this.container),this.parentGroup.checkJoinDisabled(),jQuery(".NewConditionalRecord",i).css("display","flex"),jQuery(".NewConditionalRecord",i).removeClass("NewConditionalRecord"),jQuery(".ConditionField",this.container).on("change",jQuery.proxy(this.updateSelectedField,this)),jQuery(".ConditionMod",this.container).on("change",jQuery.proxy(this.updateSelectedField,this)),jQuery(".ConditionOperation",this.container).on("change",jQuery.proxy(this.updateOperationField,this)),jQuery(".ConditionMode",this.container).on("change",jQuery.proxy(this.updateOperationField,this)),jQuery(".ConditionRemove",this.container).on("click",jQuery.proxy(this.removeCondition,this)),jQuery(".ConditionalJoin").off("change").on("change",this.complexeConditionObj.ChangeJoin),jQuery(".ConditionalRecord",this.container).on("mouseover",jQuery.proxy(function(e){var i=e.target;jQuery(i).hasClass("ConditionalRecord")||(i=jQuery(i).closest(".ConditionalRecord")),jQuery(".ConditionalRecordHover",this.parentEle).removeClass("ConditionalRecordHover"),jQuery(i).addClass("ConditionalRecordHover")},this)),jQuery(".ConditionalGroup",this.container).on("mouseover",jQuery.proxy(function(e){var i=e.target;jQuery(i).hasClass("ConditionalGroup")||(i=jQuery(i).closest(".ConditionalGroup")),jQuery(".ConditionalGroupHover",this.parentEle).removeClass("ConditionalGroupHover"),jQuery(i).addClass("ConditionalGroupHover")},this)),jQuery(".ConditionField",this.container).trigger("change"),this.complexeConditionObj.InitSelect2()},this.initializeConditionValues={},this.initialize=function(i){null!==i.field&&void 0!==i.field&&void 0!==i&&(void 0!==i.rawvalue&&null!==i.rawvalue&&(this.initializeConditionValues=i.rawvalue),e(".ConditionNot",this.container).val(i.not),e(".ConditionMode",this.container).val(i.mode),e(".ConditionField",this.container).val(i.field).trigger("change"),e(".ConditionMod",this.container).val(i.mod).trigger("change"),e(".ConditionOperation",this.container).val(i.operation).trigger("change"),e(".ConditionMode",this.container).val(i.mode).trigger("change"),this.initializeConditionValues={})},this.removeCondition=function(e){var i=this;this.container.slideUp("fast",function(){jQuery(this).remove(),i.parentGroup.checkJoinDisabled()})},this.updateOperationField=function(o){var n=this.getSelectedOperator(),l=this.getSelectedField(),d=this.getSelectedMode();-1==n.indexOf("/")&&""!=n&&("bigger"==n&&(n="after"),"lower"==n&&(n="before"),n="core/"+n);var r=this.complexeConditionObj.cbGetFieldTypeName(l),s=this.initializeConditionValues;jQuery(".ConditionValue",this.container).each(function(i,t){var o=e(t).data("name");void 0!==o&&void 0===s[o]&&(s[o]=e(t).val())});var c,p="";if("function"===d){"object"==typeof s&&(void 0===s.value||-1==s.value.indexOf("return")?(c="$value = array();\n",jQuery.each(s,function(e,i){c+="$value['"+e+"'] = '"+i+"';\n"}),s=c+="return $value;"):s=s.value);var u=(s.match(/\n/g)||[]).length;u<4&&(u=4),u>15&&(u=15),p+="<span class='customFunctionSpan'><textarea class='customFunction' style='width:100%;height:"+19*(u+1)+"px;' name='"+this.fieldNamePrefix+"[rawvalue]' id='"+this.fieldIdPrefix+"_rawvalue'>"+s+"</textarea></span>",p+="<label style='display:inline-block;'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtQTFRFAAAAAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEAIUEIHjORgAAACl0Uk5TAGDm5Foc+//5FjgxB9TOBA9ubA0sKqCYLiYtJZ+XKykQcA76+F/l41l7yLOFAAAAZ0lEQVR4nGWPRxKDUAxDTRUQCPyEXgKBUO5/wlA2+sNbWRpbI4ucGKZlC+G4gOeTEWDnQUYYAc+YbxL1eotGmuk6BwrW5RFakVEfRsMrLdDpIZ9e18NXjaxvxW7VnQn48XMyL+t2TX/hiwRcoSKPsQAAAABJRU5ErkJggg==' style='margin-bottom:-2px;cursor:pointer;' onclick=\"insertTemplateField('"+this.fieldIdPrefix+"_rawvalue', '[source]->[module]->[destination]', false)\"></label>"}else"value"===d&&(jQuery.each(this.complexeConditionObj.conditionOperators[n].config,jQuery.proxy(function(o,n){var d=this.fieldNamePrefix+"[rawvalue]["+o+"]",c=this.fieldIdPrefix+"_"+o;void 0===s[o]&&(s[o]=""),void 0!==n.label&&(p+='<label class="condLabel">'+n.label+"</label>"),p+='<span class="'+(void 0!==n.length?n.length:"")+'">';var u=n.type;if("raw"!==this.getSelectedFieldmodifier()&&(u="textfield"),"default"===u)switch(r){case"multipicklist":case"picklist":case"owner":u="picklist";break;case"boolean":u="checkbox";break;case"date":case"datetime":u="datefield";break;case"reference":default:u="textfield"}switch(console.log("Draw Config Field",u),u){case"picklist":var A="",h=!1;if(void 0!==n.multiple&&1==n.multiple&&(A='multiple="multiple" data-closeonselect="0"',d+="[]",h=!0),p+="<select class='ConditionValue MakeSelect2' data-name='"+o+"' name='"+d+"' id='"+c+"' "+A+">",void 0!==n.options)var m=n.options;else m=this.complexeConditionObj.cbGetPicklistValues(l);var f=function(i){var t="";return t+="<option value=''>&nbsp;&nbsp;&nbsp;&nbsp;&raquo;&nbsp;&nbsp;"+a.complexeConditionObj.__("LBL_EMPTY_VALUE")+"</option>",t+="<optgroup label='"+a.complexeConditionObj.__("LBL_VALUES")+"'>",jQuery.each(i,function(i,n){if(!1===h)var a=s[o]==i?"selected='selected'":"";else a=-1!==e.inArray(i,s[o])?"selected='selected'":"";t+="<option value='"+i+"' "+a+">"+n+"</option>"}),t};if(void 0!==m.then&&jQuery.isFunction(m.then))m.then(e.proxy(function(i){var t=e.proxy(f,this)(i);jQuery("#"+this.id).html(t).select2("val",s[o])},{id:c}));else{var b=e.proxy(f,this)(m);p+=b}p+="</optgroup>",p+="</select>";break;case"datefield":p+=function(e,t,o,n){void 0!==o&&null!=o||(o=""),0==t&&(t=e.replace(/[^a-zA-Z0-9_]+/g,"_")),void 0===n&&(n={}),void 0===n.refFields&&(n.refFields=!1),void 0===n.class&&(n.class=""),void 0===n.uitype&&(n.uitype=[]),void 0===n.style&&(n.style=""),void 0===n.disabled||0==n.disabled?n.disabled="":n.disabled="disabled='disabled'",void 0===n.type&&(n.type="0"),void 0===n.delimiter&&(n.delimiter=""),void 0===n.title&&(n.title=""),void 0===n.datalist&&(n.datalist=""),void 0===n.fieldType&&(n.fieldType="text"),void 0===n.readonly&&(n.readonly=!1),void 0===n.placeholder&&(n.placeholder=""),void 0===n.variables&&(n.variables=!0),void 0===n.format&&(n.format="%Y-%m-%d"),void 0===n.showTime&&(n.showTime=!1),void 0===n.dataAttr&&(n.dataAttr=!1),n.class+=" condition_value text textfield dateField templateField form-control";var a=n.uitype.join(","),l="";jQuery.each(n.dataAttr,function(e,i){l+=" data-"+e+'="'+i+'"'});var d="<input autocomplete='false' type='"+n.fieldType+"' "+l+" data-currentvalue='"+i(o)+"' "+(""!==n.datalist?'list="'+n.datalist+'"':"")+" title='"+n.title+"' placeholder='"+n.placeholder+"'  alt='"+n.title+"' data-delimiter='"+n.delimiter+"' ondblclick='dblClickTextfield(\""+t+"\");' "+n.disabled+"style='width:100% !important;float:left;"+n.style+"' data-module='"+n.module+"' class='"+n.class+"' name='"+e+"' id='"+t+"' "+(!0===n.readonly?'readonly="readonly"':"")+' value="'+(0!=o?i(o):"")+'">';return 1==n.variables?"expression"!=n.mode?d+="<span class='templateFieldBtn templateFieldButton' data-references='([source]: ([module]) [destination])' data-functions='true' data-replace='false' data-options='{\"refFields\":\""+n.refFields+'", "module": "'+n.module+'", "uitypes": "'+a+'", "type":"'+n.type+"\"}' ><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBA8CIxxYy4paAAAAnElEQVQoz5WRsQ4BQRRFDzaUVBpbS0Qi0fkBH0Gz/ooOP6RSa9b4ACKxJHs1GztPZiTONPPunLzkvQGfFRfOLImQ8kKIgn4dNo2QANBmEO7Q4YgQh0oEoGGULhkle2511DJCwZ0Tjig7hNjEnieoOsPwFArcvtgixJofjBnZIDFVjzkljusfi/KZfaaYhoWUJ0I8/M+yZDhyFn70BtrhMDokCc6yAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA0LTE1VDAwOjM1OjI4KzAyOjAwZI0qbAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNC0xNVQwMDozNToyOCswMjowMBXQktAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC' id='templateIcon_"+t+"'  style='margin-bottom:-5px;cursor:pointer;'></span>":d+="<span class='templateFieldBtn templateFieldButton' data-references='[source]->[module]->[destination]' data-functions='false' data-replace='false' data-options='{\"module\": \""+n.module+"\"}'  id='task_condition_iconspan'><img src='modules/Workflow2/icons/templatefieldPHP.png' style='margin-bottom:-2px;cursor:pointer;'>":d+="<span class='templateFieldBtn templateFieldResetButton' style='position: absolute;top:0;right: 0px;'><img src='modules/Workflow2/icons/clear.png' alt='"+MOD.LBL_VALUE_CLEAR+"' title='"+MOD.LBL_VALUE_CLEAR+"' style='margin-bottom:-5px;cursor:pointer;'></span>","<span class='templateFieldSpan'>"+d+"</span>"}(d,c,s[o],{showTime:"datetime"===r,format:"%Y-%m-%d",module:this.complexeConditionObj.getMainSourceModule(),fieldType:"text",dataAttr:{name:o},class:"ConditionValue",variables:this.complexeConditionObj.IsTemplateFieldsEnabled()});break;case"reference":if("Currency"==this.complexeConditionObj.fieldData[l].type.refersTo[0]&&void 0!==this.complexeConditionObj.available_currencies){p+="<select class='condition_value select' name='"+d+"' id='"+c+"'>";for(var g=0;g<this.complexeConditionObj.available_currencies.length;g++)p+="<option "+(s==this.complexeConditionObj.available_currencies[g].curid?"selected='selected'":"")+" value='"+this.complexeConditionObj.available_currencies[g].curid+"'>"+this.complexeConditionObj.available_currencies[g].currencylabel+"</option>";p+="</select>"}else p+=t(d,c,s[o],{refFields:!0,module:this.complexeConditionObj.getMainSourceModule(),dataAttr:{name:o},class:"ConditionValue",variables:this.complexeConditionObj.IsTemplateFieldsEnabled()});break;case"productid":p+=createProductChooser(d,c,s[o],{class:"ConditionValue"});break;default:void 0!==n.default&&""==s[o]&&1==this.initialized&&(s[o]=n.default),p+=t(d,c,s[o],{refFields:!0,module:this.complexeConditionObj.getMainSourceModule(),dataAttr:{name:o},class:"ConditionValue",variables:this.complexeConditionObj.IsTemplateFieldsEnabled()})}p+="</span>"},this)),this.container.attr("data-columns",jQuery.assocArraySize(this.complexeConditionObj.conditionOperators[n].config)));jQuery(".ConditionContainer",this.container).html(p),this.complexeConditionObj.InitSelect2(),jQuery("body").trigger("InitComponents")},this.updateSelectedField=function(e){var i=jQuery(e.target),t=jQuery(i).closest(".ConditionalRecord");this.reloadOperations(t),this.updateValueModifier(t)},this.getSelectedField=function(){return e("select.ConditionField, input.ConditionField",this.container).val()},this.getSelectedFieldmodifier=function(){return 0==e("select.ConditionMod",this.container).length?"raw":e("select.ConditionMod",this.container).val()},this.getSelectedOperator=function(){return e("select.ConditionOperation",this.container).val()},this.getSelectedMode=function(){return e("select.ConditionMode",this.container).val()},this.updateValueModifier=function(){var i=this.getSelectedFieldType(),t=this.getSelectedFieldmodifier();switch(i){case"date":case"datetime":var o={dayofmonth:"Day of month",month:"Month",dayofyear:"Day of year"};break;case"number":case"integer":case"decimal":case"currency":default:o={sum:"Summarize",avg:"Average",max:"Maximum",min:"Minimum",count:"Count",count_unique:"Count Unique"}}var n='<option value="raw">raw</option>';e.each(o,function(e,i){n+='<option value="'+e+'" '+(t===e?'selected="selected"':"")+">"+i+"</option>"}),e(".ConditionMod",this.container).html(n)},this.getSelectedFieldType=function(){var e=this.getSelectedField();return this.complexeConditionObj.cbGetFieldTypeName(e)},this.reloadOperations=function(){var e=this.getSelectedOperator(),i=this.getSelectedField(),t=this.getSelectedFieldType(),o=[];switch("raw"!==this.getSelectedFieldmodifier()&&(t="string"),console.log("Changed field to",t,i),console.log(this.complexeConditionObj.operationOptions),t){case"integer":case"currency":o=this.complexeConditionObj.operationOptions.number;break;case"date":case"datetime":o=this.complexeConditionObj.operationOptions.date;break;case"multipicklist":case"crmid":case"picklist":case"boolean":o=this.complexeConditionObj.operationOptions[t];break;default:o=this.complexeConditionObj.operationOptions.text}for(var n="",a=0;a<o.length;a++){var l;l=void 0!==this.complexeConditionObj.conditionOperators[o[a]]?this.complexeConditionObj.conditionOperators[o[a]].label:o[a],l=this.complexeConditionObj.__(l),n+="<option value='"+o[a]+"' "+(void 0!==e&&e==o[a]?'selected="selected"':"")+">"+l+"</option>"}jQuery(".ConditionOperation",this.container).html(n).trigger("change")}},c=function(i,t){void 0===t&&(t=!1),this.ownElementIndex=0,this.elementIndex=0,this.parentGroup=t,this.complexeConditionObj=i,this.backgroundColors=["f9f9f9","e7f4fe","d9d9d9","e7f4fe","b9b9b9","d9d9d9","e9e9e9","f9f9f9"],this.container=null,!1!==this.parentGroup?(this.ownElementIndex=this.parentGroup.getFreeElementIndex(),this.nestedLevel=this.parentGroup.getNestedLevel()+1,this.fieldPrefix=this.parentGroup.getGroupPrefix()+"["+this.ownElementIndex+"]",this.fieldIdPrefix=this.parentGroup.getGroupIdPrefix()+"_"+this.ownElementIndex):(this.nestedLevel=0,this.fieldPrefix=this.complexeConditionObj.getFieldnamePrefix(),this.fieldIdPrefix="root"),this.getFreeElementIndex=function(){return this.elementIndex++},this.getBackgroundColor=function(){return"#"+this.backgroundColors[this.nestedLevel%this.backgroundColors.length]},this.checkJoinDisabled=function(){0==e(".ConditionalRecord",this.container).length?e("> .btn-toolbar .joinSelector",this.container).prop("disabled",!0):e("> .btn-toolbar .joinSelector",this.container).prop("disabled",!1),!1!==this.parentGroup&&this.parentGroup.checkJoinDisabled()},this.getNestedLevel=function(){return this.nestedLevel},this.initialize=function(i){void 0!==i&&void 0!==i.childs&&(e.each(i.childs,e.proxy(function(i,t){if(void 0!==t.childs){var o=new c(this.complexeConditionObj,this);o.appendTo(e("> .CondContainer",this.container)),o.initialize(t)}else if(void 0!==t.field){var n=new s(this.complexeConditionObj,this);n.appendTo(e("> .CondContainer",this.container)),n.initialize(t)}},this)),this.setJoin(i.join))},this.setJoin=function(i){e("> .btn-toolbar .ConditionalMasterJoin",this.container).val(i).trigger("change")},this.appendTo=function(i){var t="";t+="<div class='ConditionalGroup "+(this.complexeConditionObj.isInitialized()?"NewConditionalGroup":"")+"' data-nestedlevel='"+this.nestedLevel+"' style='background-color:"+this.getBackgroundColor()+"'>",t+="<div class='CondContainer'></div>",t+="<div class='btn-toolbar' style='margin: 5px 0 0 0;'>",t+="<div class='btn-group conditionFooterToolbar'>",t+="<button type='button' class='btn btn-info addGroupBtn'><i class='icon-folder-open icon-white'></i>&nbsp;&nbsp;"+this.complexeConditionObj.__("LBL_ADD_GROUP")+"</button>",t+="<button type='button' class='btn btn-primary addConditionBtn'><i class='icon-plus-sign icon-white'></i>&nbsp;&nbsp;"+this.complexeConditionObj.__("LBL_ADD_CONDITION")+"</button>",t+=this.complexeConditionObj.generateJOINSelect(this.getGroupPrefix(!0),!0),t+="</div>",this.nestedLevel>0&&(t+="<div class='btn-group pull-right'><button type='button' class='btn btn-danger groupRemoveBtn'><i class='icon-remove icon-white'></i>&nbsp;&nbsp;"+this.complexeConditionObj.__("LBL_REMOVE_GROUP")+"</button></div>"),t+="</div>",t+="</div>",t+=this.complexeConditionObj.generateJOINSelect("",!1),this.container=e(t),e(i).append(this.container),this.checkJoinDisabled();var o=e("> .btn-toolbar",this.container);e(".addGroupBtn",o).on("click",e.proxy(this.BtnClickAddGroup,this)),e(".addConditionBtn",o).on("click",e.proxy(this.BtnClickAddCondition,this)),e(".ConditionalMasterJoin",o).on("change",e.proxy(this.ChangeMasterJoin,this)),e(".groupRemoveBtn",o).on("click",e.proxy(this.BtnClickRemoveGroup,this)),e(".ConditionalSubJoin",i).off("change").on("change",this.complexeConditionObj.ChangeJoin),e(".NewConditionalGroup",i).slideDown("fast").removeClass("NewConditionalGroup")},this.ChangeMasterJoin=function(i){var t=e(i.target);e(t).closest(".ConditionalGroup");e("> .CondContainer > .ConditionalJoin select",this.container).val(t.val())},this.BtnClickAddCondition=function(i){new s(this.complexeConditionObj,this).appendTo(e("> .CondContainer",this.container))},this.BtnClickAddGroup=function(i){new c(this.complexeConditionObj,this).appendTo(e("> .CondContainer",this.container))},this.BtnClickRemoveGroup=function(){var e=this;this.container.slideUp("slideUp",function(){jQuery(this).remove(),e.checkJoinDisabled()})},this.getGroupIdPrefix=function(){return this.fieldIdPrefix},this.getGroupPrefix=function(e){if(void 0===e&&(e=!1),!1===e)var i=this.fieldPrefix+"[childs]";else i=this.fieldPrefix;return i}};window.ComplexeCondition=function(i,t){if(this.initialized=!1,this.conditionOperators=null,this.operationOptions={picklist:[],multipicklist:[],boolean:[],number:[],date:[],text:[],crmid:[]},this.hasChanged=!1,this.moduleFields=null,this.available_currencies=[],this.available_users=[],this.parentEle=jQuery(i),this.fieldOptionsHTMLCache=null,this.fieldNamePrefix=t,this.conditionMode="field",this.requiredOnInit=[],this.condition={},this.fieldData={},this.enableTemplateFields=!0,this.environmentVariables=[],this.DisabledConditionMode=!1,this.dynamicFieldMode=!1,this.enableValueModifier=!1,void 0===o)var o={};this.columnsRewrites={assigned_user_id:"smownerid"},this.cbGetFieldTypeName=function(e){return void 0!==this.fieldData[e]?this.fieldData[e].type.name:"text"},this.cbGetPicklistValues=function(e){return this.fieldData[e].type.picklistValues},this.mainCheckModule=null,this.mainSourceModule=null,this.imagePath="",this.mainGroup=!1,this.setFieldnamePrefix=function(e){this.fieldNamePrefix=e},this.setTranslation=function(e){o=e},this.setEnabledTemplateFields=function(e){this.enableTemplateFields=1==e},this.disableConditionMode=function(){this.DisabledConditionMode=!0},this.enableValueModifier=function(){this.enableValueModifier=!0},this.setImagePath=function(e){this.imagePath=e},this.setScopeName=function(e){r=e,""===this.imagePath&&this.setImagePath("modules/"+r+"/views/resources/img/")},this.setConditionMode=function(e){this.conditionMode="field"==e?"field":"mysql"},this.setMainCheckModule=function(e){this.mainCheckModule=e},this.setMainSourceModule=function(e){this.mainSourceModule=e},this.enableHasChange=function(e){this.hasChanged=1==e},this.setFieldTypeCallback=function(e){"function"!=typeof e&&console.error("Field type callback must be function"),this.cbGetFieldTypeName=e},this.setAvailableVariables=function(e){!1!==e?(this.setEnabledTemplateFields(!0),e):this.setEnabledTemplateFields(!1)},this.setPicklistCallback=function(e){"function"!=typeof e&&console.error("Picklist callback must be function"),this.cbGetPicklistValues=e},this.setAvailableCurrencies=function(e){this.available_currencies=e},this.setAvailableUser=function(e){this.available_users=e},this.setModuleFields=function(e){"function"==typeof e&&(this.dynamicFieldMode=!0),this.moduleFields=e,"object"==typeof e&&(this.fieldData={},jQuery.each(this.moduleFields,jQuery.proxy(function(e,i){jQuery.each(i,jQuery.proxy(function(e,i){void 0!==this.columnsRewrites[i.name]&&(i.name=this.columnsRewrites[i.name]),"string"==typeof i.type&&(i.type={name:i.type}),"crmid"!=i.name&&-1===i.name.indexOf(" crmid)")||(i.type={name:"crmid"}),this.fieldData[i.name]=i},this))},this)),this.fieldData.smownerid.type.picklistValues={},this.fieldData.smownerid.type.name="picklist",this.fieldData.smownerid.type.picklistValues={},this.fieldData.smownerid.type.picklistValues.$current_user_id="$currentUser")},this.setEnvironmentVariables=function(e){this.environmentVariables=e},this.setCondition=function(i){if(void 0!==i){if(void 0===i.childs){var t=[];e.each(i,function(e,i){"object"==typeof i&&""!==i.operator&&void 0!==i.field&&""!=i.field&&(i.field=JSON.parse(i.field),"string"==typeof i.field&&(i.field=JSON.parse(i.field)),t.push({field:i.field.fieldkeyid,mod:i.mod,operation:i.operator,not:i.not,mode:"value",rawvalue:i.config}))}),i={join:"and",childs:t}}this.condition=i}},this.setConditionOperators=function(i){this.conditionOperators=i,e.each(i,e.proxy(function(i,t){"all"===t.fieldtypes?e.each(this.operationOptions,e.proxy(function(e,t){this.operationOptions[e].push(i)},this)):e.each(t.fieldtypes,e.proxy(function(e,t){void 0!==this.operationOptions[t]&&this.operationOptions[t].push(i)},this))},this)),this.operationOptions.owner=this.operationOptions.picklist,this.operationOptions.crmid=jQuery.merge(jQuery.extend([],this.operationOptions.number),jQuery.extend([],this.operationOptions.crmid)),this.operationOptions.crmid=jQuery.grep(this.operationOptions.crmid,jQuery.proxy(function(e,i){return i==this.operationOptions.crmid.indexOf(e)},this))},this.isInitialized=function(){return this.initialized},this.IsTemplateFieldsEnabled=function(){return this.enableTemplateFields},this.getFieldnamePrefix=function(){return this.fieldNamePrefix},this.getMainSourceModule=function(){return this.mainSourceModule},this.getMainCheckModule=function(){return this.mainCheckModule},this.getFieldOptions=function(){if(null===this.fieldOptionsHTMLCache){var e="";jQuery.each(this.moduleFields,jQuery.proxy(function(i,t){e+="<optgroup label='"+i+"'>";for(var o=0;o<this.moduleFields[i].length;o++)void 0!==this.columnsRewrites[this.moduleFields[i][o].name]&&(this.moduleFields[i][o].name=this.columnsRewrites[this.moduleFields[i][o].name]),e+="<option value='"+this.moduleFields[i][o].name+"'>"+this.moduleFields[i][o].label+"</option>";e+="</optgroup>"},this)),"object"==typeof this.environmentVariables&&this.environmentVariables.length>0&&(e+="<optgroup label='Environment Variables'>",jQuery.each(this.environmentVariables,function(i,t){e+="<option value='"+t+"'>"+t+"</option>"}),e+="</optgroup>"),this.fieldOptionsHTMLCache=e}return this.fieldOptionsHTMLCache},this.IsConditionModeVisible=function(){return!1===this.DisabledConditionMode},this.IsValueModifiersVisible=function(){return!0===this.enableValueModifier},this.IsDynamicFieldLoader=function(){return this.dynamicFieldMode};var n=this,a=function(e){if(void 0!==o[e])return o[e];if("undefined"!=typeof FlexTranslate){var i=null;try{i=FlexTranslate(r)}catch(i){return e}return void 0!==i?i.__(e):e}return e},d=function(){n.parentEle.hide(),n.currentParentGroupId="root",n.initValues=[],p(),n.mainGroup=new c(n,!1),n.mainGroup.appendTo(n.parentEle),n.mainGroup.initialize(n.condition),n.parentEle.fadeIn("fast",function(){n.InitSelect2()}),n.initialized=!0,n.enableTemplateFields&&"undefined"!=typeof InitAutocompleteText&&InitAutocompleteText(),n.parentEle.on("click",".templateFieldButton",e.proxy(function(e){var i=jQuery(e.currentTarget),t=i.closest(".templateFieldSpan,.templateTextareaSpan").find(".templateField"),o=(t.attr("id"),i.data("options"));l(t,i.data("references"),!0===i.data("functions"),!0===i.data("replace"),o)},n))},s=function(e){n.requiredOnInit.push(e)},p=function(){var i='<div class="ConditionControlPanel"><strong>Options:&nbsp;&nbsp;</strong>';i+='<label><input type="checkbox" class="ConditionJoinCollapse" checked="checked" /> '+a("Collapse logical operators")+"</label>",i+="</div>",n.parentEle.html(i),e(".ConditionJoinCollapse",n.parentEle).on("change",function(i){1==e(i.target).prop("checked")?e(n.parentEle).addClass("ConditionCollapseJoins").removeClass("ConditionExpandJoins"):e(n.parentEle).removeClass("ConditionCollapseJoins").addClass("ConditionExpandJoins")}).trigger("change")};this.__=a,this.ChangeJoin=function(e){var i=jQuery(e.target),t=jQuery(i).closest(".ConditionalGroup");t.children(".CondContainer").children(".ConditionalJoin").find("select").val(i.val()),jQuery("> .btn-toolbar .ConditionalMasterJoin select",t).val(i.val())},this.InitSelect2=function(){var i;(i=e(".MakeSelect2",this.parentEle)).removeClass("MakeSelect2"),i.each(function(i,t){e(t).select2({closeOnSelect:"0"!=e(t).data("closeonselect")})}),!0===this.dynamicFieldMode&&((i=e(".MakeHiddenSelect2.ConditionField",this.parentEle)).removeClass("MakeHiddenSelect2"),i.each(e.proxy(function(i,t){e(t).select2({closeOnSelect:"0"!=e(t).data("closeonselect"),initSelection:e.proxy(function(e,i){var t=this.moduleFields(e.val(),!0);void 0!==t.id&&i(t)},this),query:e.proxy(function(e){var i=this.moduleFields(e.term,!1);e.callback(i)},this)})},this)))},this.init=function(){0==e(".CONDITIONSTYLES").length&&e("body").append('<style type="text/css" class="CONDITIONSTYLES">:host{border:2px solid #00f;display:block}.ConditionContainer>span:first-of-type:nth-last-of-type(1),.ConditionContainer>span:first-of-type:nth-last-of-type(1)~span{width:100%;display:block}.ConditionContainer>span:first-of-type:nth-last-of-type(2),.ConditionContainer>span:first-of-type:nth-last-of-type(2)~span{display:inline-block}.ConditionalRecord{padding:2px 3px;display:flex;flex-direction:row;width:100%;box-sizing:border-box}.ConditionalRecord select{margin-bottom:1px;width:100%;height:29px}.ConditionalRecord[data-columns="1"] .select2-container.ConditionValue{width:100%}.ConditionalRecord[data-columns="0"] .ConditionContainer,.ConditionalRecord[data-columns="0"] .ConditionMode{display:none}.ConditionalGroupHover{border:2px solid red!important}.ConditionalRecordHover{background-color:#eee}.ConditionalGroup[data-parentgroup=root]{margin-left:0}.ConditionalGroup[data-nestedlevel="0"]{border-top-color:#ccc;margin-top:-1px;margin-left:10px}.ConditionalGroup{border:2px solid #777;padding:3px 3px 5px 3px;background-color:#eee;margin:0;margin-left:3px;margin-bottom:10px;border-radius:2px;margin-top:5px}.ConditionOperation{flex:0 0 100px;box-sizing:border-box}.joinSelector{margin-bottom:5px}.ConditionField{flex:0 0 30%;box-sizing:border-box}.ConditionNot{flex:0 0 60px;margin-left:3px;box-sizing:border-box}.ConditionMode{flex:0 0 80px;box-sizing:border-box}.ConditionValue.select{width:200px}.ConditionMode,.ConditionNot,.ConditionOperation,.ConditionValue.select{font-size:11px;padding:2px;margin-right:3px;vertical-align:top}.ConditionValue.text{vertical-align:top;width:300px}.ConditionCollapseJoins .conditionFooterToolbar .ConditionalSubJoin{display:inline!important;line-height:26px}.ConditionCollapseJoins .ConditionalSubJoin{display:none!important}.ConditionExpandJoins .ConditionalMasterJoin{display:none!important}.ConditionalJoin select{width:80px;font-size:11px;text-transform:uppercase;letter-spacing:2px;padding:0;height:20px;margin:0 0 2px 40px;font-weight:700}img.ConditionRemove{margin-bottom:-4px;margin-right:4px;vertical-align:top;margin-top:5px;cursor:pointer;width:16px;height:16px}span.group_remove{float:right}.ConditionContainer{flex:2 0 30%;box-sizing:border-box;display:flex}.NewConditionalGroup,.NewConditionalRecord{display:none}.ConditionContainer span{flex-grow:1}.ConditionContainer span.short input,.ConditionContainer span.short select{width:140px}.ConditionControlPanel{background-color:#eee;padding:5px;border-top:2px solid #777;border-right:2px solid #777;border-left:2px solid #777;border-bottom:0 solid #777;margin-left:10px}.ConditionControlPanel label{display:inline-block;margin-bottom:0}.ConditionalGroup[data-recordindex="0"]{margin-left:0;margin-right:0;border-bottom:2px solid #777;border-radius:0}.ConditionContainer .condLabel{display:inline-block;margin-left:10px;margin-right:10px}span.templateFieldBtn img{vertical-align:middle}span.templateFieldBtn{width:28px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;display:inline-block;line-height:20px;border:1px solid #a0a0a0;cursor:pointer;background:#f6f6f6}span.templateFieldSpan{display:flex;width:100%;position:relative;vertical-align:middle;box-sizing:border-box}span.templateTextareaSpan{display:flex;width:100%;position:relative;vertical-align:middle;border:1px solid #c4c4c4;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;box-sizing:border-box;background-color:#f6f6f6}span.templateTextareaSpan textarea{border:none;border-right:1px solid #c4c4c4;border-top-left-radius:4px;margin-bottom:0;box-shadow:none}input.templateField{margin-bottom:0;border:1px solid #a0a0a0;flex-grow:1;border-right:0;height:29px;box-sizing:border-box}span.templateFieldBtn{-moz-border-radius-bottomright:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;border-bottom-right-radius:4px;flex-grow:0;text-align:center}span.templateFieldMidButton{-moz-border-radius-bottomright:0!important;-moz-border-radius-topright:0!important;border-top-right-radius:0!important;border-bottom-right-radius:0!important}span.calendarFieldButton:hover,span.templateFieldButton:hover,span.templateFieldMidButton:hover,span.templateFieldResetButton:hover{background:#e5e5e5}span.calendarFieldButton:active,span.templateFieldButton:active,span.templateFieldResetButton:active{background:0 0;background-color:#eee}span.calendarFieldButton,span.templateFieldResetButton{padding:0 5px}span.templateFieldResetButton{padding:0 2px}input.textfield:focus,textarea.textfield:focus{outline:0}ul.textcomplete-dropdown{width:450px}.textcomplete-header{background-color:#ccc;color:#444;line-heigh:25px}.textcomplete-dropdown{overflow:auto}div.FieldSetterValueContainer img.exclamation{display:inline;margin:0 5px -5px 0}.btn{padding:5px 12px;font-size:13px;font-weight:700;line-height:18px;cursor:default;-webkit-background-clip:border-box;background-clip:border-box;border-radius:2px;-webkit-box-shadow:none;box-shadow:none}.btn-primary{color:#fff;text-shadow:0 1px rgba(0,0,0,.1);background-image:-webkit-linear-gradient(top,#4d90fe 0,#4787ed 100%);background-image:-o-linear-gradient(top,#4d90fe 0,#4787ed 100%);background-image:-webkit-gradient(linear,left top,left bottom,from(#4d90fe),to(#4787ed));background-image:linear-gradient(to bottom,#4d90fe 0,#4787ed 100%);background-repeat:repeat-x;border:1px solid #3079ed}.btn{border-radius:0;font-weight:100;cursor:pointer}.btn-info{color:#fff;text-shadow:0 1px rgba(0,0,0,.1);background-image:-webkit-linear-gradient(top,#5bc0de 0,#5bc0de 100%);background-image:-o-linear-gradient(top,#5bc0de 0,#5bc0de 100%);background-image:-webkit-gradient(linear,left top,left bottom,from(#5bc0de),to(#5bc0de));background-image:linear-gradient(to bottom,#5bc0de 0,#5bc0de 100%);background-repeat:repeat-x;border:1px solid #46b8da}.btn-danger{color:#fff;text-shadow:0 1px rgba(0,0,0,.1);background-image:-webkit-linear-gradient(top,#dd4b39 0,#d14836 100%);background-image:-o-linear-gradient(top,#dd4b39 0,#d14836 100%);background-image:-webkit-gradient(linear,left top,left bottom,from(#dd4b39),to(#d14836));background-image:linear-gradient(to bottom,#dd4b39 0,#d14836 100%);background-repeat:repeat-x;border:1px solid #c6322a}.pull-right{float:right}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}</style>');var i=document.documentElement.style;("flexWrap"in i||"WebkitFlexWrap"in i||"msFlexWrap"in i)&&jQuery(this.parentEle).addClass("supportFlexbox"),null===this.conditionOperators&&s("operators"),null===this.moduleFields&&s("fields"),this.requiredOnInit.length>0?e.post("index.php?module="+r+"&action=ComplexeCondition&mode=init",{mainModule:this.mainCheckModule,conditionMode:this.conditionMode,required:this.requiredOnInit},e.proxy(function(e){void 0!==e.operators&&this.setConditionOperators(e.operators),void 0!==e.fields&&this.setModuleFields(e.fields),d()},this),"json"):"function"!=typeof this.moduleFields?this.LoadFields().then(jQuery.proxy(d,this)):d()},this.generateJOINSelect=function(e,i){void 0===i&&(i=!1);var t="<div class='ConditionalJoin ConditionalSubJoin "+(!0===i?"ConditionalMasterJoin":"")+"'>";return t+=!0===i?"<select class='joinSelector' disabled='disabled' name='"+e+"[join]'>":"<select class='joinSelector' disabled='disabled' >",t+="<option value='and'>"+a("LBL_AND")+"</option>",t+="<option value='or'>"+a("LBL_OR")+"</option>",t+="</select>",t+="</div>"}}}(jQuery);